<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beginner</title>
  <!-- Bootstrap CSS -->  

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="/static/style.css">


</head>

<body>

<div class="grid-container">

  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container" >
    <div class="tradingview-widget-container__widget" ></div>

    <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>

        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
        "width": "800",
        "height": "500",
        "symbol": "NASDAQ:AAPL",
        "interval": "2",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "enable_publishing": false,
        "allow_symbol_change": false,
        "save_image": true,
        "calendar": false,
        "support_host": "https://www.tradingview.com"
      }
      </script>
  </div>
<!-- TradingView Widget END -->
<button id="screenshotButton">Take Screenshot</button>
<img id="screenshotDisplay" alt="Screenshot will be displayed here">
</div>
<script>
  document.getElementById('screenshotButton').addEventListener('click', function() {
      fetch("/screenshot")
      .then(response => {
          if (response.ok) return response.json();
          throw new Error('Screenshot capture failed.');
      })
      .then(data => {
          if (data.message === "Screenshot taken successfully") {
              // Append a cache-busting timestamp to the image URL
              const timestamp = new Date().getTime();
              const imageUrl = `/static/screenshots/screenshot.png?${timestamp}`;
              document.getElementById('screenshotDisplay').src = imageUrl;
          } else {
              throw new Error('Failed to capture screenshot.');
          }
      })
      .catch(error => console.error('Error:', error));
  });
  </script>
  
 
</body>
</html>
